# Ye urduhack ki zaroori files ka chota version hai
# Is se humein tensorflow (644MB) install nahi karna padega

import re

# --- Ye code normalize_characters ke liye hai ---
_NORMALIZE_CHARACTERS_MAP = {
    "آ": "آ", "أ": "ا", "إ": "ا", "ٱ": "ا", "ٲ": "ا", "ٳ": "ا", "ٵ": "ا", "ﺍ": "ا", "ﺄ": "ا", "ﺇ": "ا",
    "ﺎ": "ا", "ب": "ب", "ٻ": "ب", "پ": "پ", "ڀ": "بھ", "ت": "ت", "ٺ": "ٹھ", "ٽ": "ٹ", "ٿ": "تھ",
    "ث": "ث", "ج": "ج", "ڃ": "ج", "ڄ": "ج", "چ": "چ", "ڇ": "چھ", "ح": "ح", "خ": "خ", "د": "د",
    "ڌ": "دھ", "ڈ": "ڈ", "ډ": "ڈ", "ڊ": "ڈ", "ڍ": "ڈھ", "ذ": "ذ", "ر": "ر", "ڑ": "ڑ", "ڙ": "ڑ",
    "ز": "ز", "ژ": "ژ", "س": "س", "ش": "ش", "ص": "ص", "ض": "ض", "ط": "ط", "ظ": "ظ", "ع": "ع",
    "غ": "غ", "ف": "ف", "ق": "ق", "ک": "ک", "ڪ": "ک", "ګ": "ک", "ك": "ک", "گ": "گ", "ڳ": "گ",
    "ڱ": "گ", "ل": "ل", "م": "م", "ن": "ن", "ں": "ں", "ڻ": "ن", "و": "و", "ؤ": "و", "ٶ": "و",
    "ۄ": "و", "ۊ": "و", "ۇ": "و", "ۏ": "و", "ū": "و", "ه": "ہ", "ھ": "ھ", "ہ": "ہ", "ۂ": "ہ",
    "ۃ": "ہ", "ە": "ہ", "y": "ی", "ی": "ی", "ئ": "ی", "ێ": "ی", "ې": "ی", "ۑ": "ی", "ى": "ی",
    "ۍ": "ی", "ﯼ": 'ی', "ﻯ": "ی", "ي": "ی", "ے": "ے", "ۓ": "ے", "۱۲": "12", "٪": "%",
    "×": "*", "÷": "/", "é": "e", "π": "pi", "–": "-", "∆": "delta", "∞": "infinity",
    "≈": "approx", "≠": "!=", "≤": "<=", "≥": ">=", "°": "degree", "²": "2", "³": "3",
    "θ": "theta", "φ": "phi", "٫": ",", "٬": ",", "。": ".", "၊": ",", "॥": ".", "‘": "'",
    "’": "'", "”": '"', "“": '"', "•": "*", "—": "-", "–": "-", "►": "*", "(": "(",
    ")": ")", "۔": ".", "\u0640": "", "\u064B": "", "\u064C": "", "\u064D": "", "\u064E": "",
    "\u064F": "", "\u0650": "", "\u0651": "", "\u0652": "", "\u0653": "", "\u0654": "", "\u0655": "",
    "\u0656": "", "\u0657": "", "\u0658": "", "\u0659": "", "\u065A": "", "\u065B": "", "\u065C": "",
    "\u065D": "", "\u065E": "", "\u065F": "", "\u0670": "", "‌": " ", "‍": " ", "‏": " ",
    "‎": " ", "\r": " ", "\t": " ", "﻿": " ",
}

def normalize_characters(text: str) -> str:
    text_out = ""
    for char in text:
        text_out += _NORMALIZE_CHARACTERS_MAP.get(char, char)
    return text_out

# --- Ye code remove_diacritics ke liye hai ---
_DIACRITICS_REGEX = re.compile(r"[\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E8\u06EA-\u06ED\u08D4-\u08E1\u08D4-\u08ED\u08E3-\u08FF]")

def remove_diacritics(text: str) -> str:
    return _DIACRITICS_REGEX.sub("", text)

# --- Ye code normalize_combine_characters ke liye hai ---
_COMBINE_CHARS_MAP = {
    "گ": (1711,), "ھ": (1726,), "ی": (1746,), "ے": (1748,),
    "ا": (1575,), "ب": (1576,), "پ": (1662,), "ت": (1578,),
    "ٹ": (1657,), "ث": (1579,), "ج": "ج", "چ": (1670,),
    "ح": (1581,), "خ": (1582,), "د": (1583,), "ڈ": (1672,),
    "ذ": (1584,), "ر": (1585,), "ڑ": (1681,), "ز": (1586,),
    "ژ": (1688,), "س": (1587,), "ش": (1588,), "ص": (1589,),
    "ض": (1590,), "ط": (1591,), "ظ": (1592,), "ع": (1593,),
    "غ": (1594,), "ف": (1601,), "ق": (1602,), "ک": (1705,),
    "ل": (1604,), "م": (1605,), "ن": (1606,), "ں": (1722,),
    "و": (1608,), "ہ": (1729,),
}

def normalize_combine_characters(text: str) -> str:
    # Complex logic copied from urduhack
    for key, value in _COMBINE_CHARS_MAP.items():
        text = re.sub(f"{key}[\u0650\u064F\u064E]", f"{key}", text)
    return text
